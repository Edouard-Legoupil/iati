---
title: "-- Donor Analysis"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{-- Donor Analysis}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r}
library(iati)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/dev_donor_focus.Rmd: do not edit by hand -->



## show_donor_ranking

```{r example-show_donor_ranking}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 8.0
#| fig.asp: 0.818
#| fig.align: center
#| out.width: 90%

# Example usage:
show_donor_ranking(  
   year = 2025,
   top_n_display = 20 )

show_donor_ranking(
  donor_name = "Private donors",
  year = c(2023,2024,2025),
  top_n_display = 10
)

show_donor_ranking(   
  donor_name = "Private donors", 
   year = 2023,
   top_n_display = 10 )


```




## show_donor_funding_over_time
    

```{r example-show_donor_funding_over_time}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 8.0
#| fig.asp: 0.618
#| fig.align: center
#| out.width: 90%

show_donor_funding_over_time(donor_name = "Private donors",
                                         year = c(2022, 2023, 20234, 2025),
                                         by = "global" )
show_donor_funding_over_time(donor_name = "Private donors",
                                         year = c(2022, 2023, 20234, 2025),
                                         by = "region" )
show_donor_funding_over_time(donor_name = "Private donors",
                                         year = c(2022, 2023, 20234, 2025),
                                         by = "earmarking_name" )
show_donor_funding_over_time(donor_name = "Private donors",
                                         year = c(2022, 2023, 20234, 2025),
                                         by = "country",
                                         top_n_countries = 10)

```

  

## show_donor_earmarking

```{r example-show_donor_earmarking}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 8.0
#| fig.asp: 0.618
#| fig.align: center
#| out.width: 90%

show_donor_earmarking(donor_name = "Private donors",
                                         year = c(2022, 2023, 2024, 2025),
                                         by = "global") 
show_donor_earmarking(donor_name = "Private donors",
                                         year = c(2022, 2023, 2024, 2025),
                                         by = "date") 
show_donor_earmarking(donor_name = "Private donors",
                                         year = c(  2025),
                                         by = "region") 
```

  

## show_donor_earmarking_flexibility_over_time

```{r example-show_donor_earmarking_flexibility_over_time}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 8.0
#| fig.asp: 0.618
#| fig.align: center
#| out.width: 90%

# Earmarking Flexibility Over Time
show_donor_earmarking_flexibility_over_time(donor_name = "Private donors",
                                            ctr_name = "Syria")


```

  

## show_donor_transaction_desc

```{r example-show_donor_transaction_desc}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 8.0
#| fig.asp: 0.618
#| fig.align: center
#| out.width: 90%


# Show top 10 transaction descriptions for a donor
show_donor_transaction_desc(
  donor_name = "Private donors", 
  year = 2024,
  top_n = 10
)

# Show top 10 transaction descriptions for a donor
show_donor_transaction_desc(
  donor_name = "Private donors", 
  year = 2022:2025,
  top_n = 10
)

# Show earmarking breakdown with proper color coding
show_donor_transaction_desc(
  donor_name = "Private donors",
  by = "earmarking_name",
  year = 2024,
  top_n = 4  # Shows all 4 earmarking types
)

# Show funding by region
show_donor_transaction_desc(
  donor_name = "Private donors",
  by = "unhcr_region",
  year = 2025,
  top_n = 8
)


```

  

## compare_donor_profiles

```{r example-compare_donor_profiles}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 8.0
#| fig.asp: 0.618
#| fig.align: center
#| out.width: 90%

# Compare Donor Profiles

## using mean
compare_donor_profiles(
  donor_names = "Private donors",
  by = "earmarking",
  year = 2025,
  avg_method = "mean_of_donors",
  display_mode = "absolute"
)
compare_donor_profiles(
  donor_names = "Private donors",
  by = "earmarking",
  year = 2025,
  avg_method = "mean_of_donors",
  display_mode = "relative"
)

## using pooled
compare_donor_profiles(
  donor_names = "Private donors",
  by = "earmarking",
  year = 2025,
  avg_method = "pooled",
  display_mode = "absolute"
)


compare_donor_profiles(
  donor_names = "Private donors",
  by = "earmarking",
  year = 2025,
  avg_method = "pooled",
  display_mode = "relative"
)


compare_donor_profiles(
  donor_names = "Private donors",
  by = "region",
  year = 2025,
  avg_method = "pooled",
  display_mode = "relative"
)

compare_donor_profiles(
  donor_names = c("Private donors", 
 "Switzerland - Swiss Agency for Development and Cooperation (SDC)"), 
   by = "earmarking", 
 year = 2025, 
 ctr_name = "Brazil")
```

  

## show_donor_geographic_priority_shift

```{r example-show_donor_geographic_priority_shift}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 8.0
#| fig.asp: 0.618
#| fig.align: center
#| out.width: 90%

# Example usage: 
show_donor_geographic_priority_shift(
   donor_name = "Private donors", 
   top_n_countries = 7,
   start_year = 2022,
   end_year = 2025
 )
```



## show_donor_activity_diversification

```{r example-show_donor_activity_diversification}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 8.0
#| fig.asp: 0.618
#| fig.align: center
#| out.width: 90%

# Example usage:
show_donor_activity_diversification( 
  donor_name = "Private donors", 
   start_year = 2022, 
   end_year = 2025
)



```



## show_donor_funding_volatility

```{r example-show_donor_funding_volatility}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 8.0
#| fig.asp: 0.618
#| fig.align: center
#| out.width: 90%

# Donor Funding Volatility

show_donor_funding_volatility(
  donor_name = "Private donors",
  time_unit = "quarter",
  forecast_horizon = 8
)

show_donor_funding_volatility(
  donor_name = "Private donors",
  year = 2022:2026,
  top_n_donors = 10,,
  forecast_horizon = 8,
  time_unit = "month"
)

show_donor_funding_volatility(donor_name = "Private donors", 
                              ctr_name = "Brazil")
```


  

## plot_donor_regional_focus_treemap

```{r example-plot_donor_regional_focus_treemap}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 10.0
#| fig.asp: 0.7
#| fig.align: center
#| out.width: 90%

# Example usage:
plot_donor_regional_focus_treemap(
  donor_name = "Private donors",
  year = c(2023, 2024, 2025),
  label_font_size = 3
)

plot_donor_regional_focus_treemap(
  donor_name = "Private donors",
  year = 2025,
  label_font_size = 5
)
```




## plot_donor_location_map

```{r example-plot_donor_location_map}
#| message: no
#| warning: no
#| fig.retina: 2.0
#| fig.width: 12.0
#| fig.asp: 0.6
#| fig.align: center
#| out.width: 90%

# Example usage:
plot_donor_location_map(
  donor_name = "Private donors",
  year = 2025,
  top_n_locations = 5,
  max_symbol_size = 20
)
```





